<div class="homepage-container">
  <div class="hero-section">
    <div class="hero-content">
      <h1>üß† Analyse d'√âcriture</h1>
      <p>T√©l√©chargez un √©chantillon d'√©criture pour d√©tecter d'√©ventuels signes de dyslexie</p>
    </div>
  </div>

  <div class="upload-section">
    <div class="upload-container">
      <label for="file-upload" class="file-upload-label">
        <span>S√©lectionner une image</span>
      </label>
      <input id="file-upload" type="file" (change)="onFileSelected($event)" accept="image/*" class="file-input" />
    </div>

    <div *ngIf="error" class="error-message">‚ö†Ô∏è {{ error }}</div>

    <!-- R√©sultats -->
    <div *ngIf="result" class="features">
      <div class="feature">
        <h3>Pr√©cision Orthographique</h3>
        <p class="result-value">{{ result.features[0] | number:'1.2-2' }}%</p>
      </div>

      <div class="feature">
        <h3>Pr√©cision Grammaticale</h3>
        <p class="result-value">{{ result.features[1] | number:'1.2-2' }}%</p>
      </div>

      <div class="feature">
        <h3>Pourcentage de Corrections</h3>
        <p class="result-value">{{ result.features[2] | number:'1.2-2' }}%</p>
      </div>
    </div>

    <div *ngIf="result" class="phonetic-section">
      <div class="feature">
        <h3>Pr√©cision Phon√©tique</h3>
        <p class="result-value">{{ result.features[3] | number:'1.2-2' }}%</p>
      </div>
    </div>

    <!-- R√©sultat pr√©dictif -->
    <div *ngIf="result" class="prediction-section"
         [ngClass]="{'prediction-safe': result.prediction[0] === 1, 'prediction-warning': result.prediction[0] === 0}">
      <h2>
        {{ result.prediction[0] === 1
            ? '‚úÖ Aucun signe de dyslexie d√©tect√©'
            : '‚ö†Ô∏è Signes possibles de dyslexie d√©tect√©s' }}
      </h2>
    </div>

    <!-- Bouton "Recommande-moi des exercices" -->
    <div *ngIf="result && result.prediction[0] === 0 && !showRecommendations" class="action-buttons">
      <button (click)="generateExerciseRecommendations()" class="cta-button">
        üìö Recommande-moi des exercices
      </button>
    </div>

    <!-- Exercices recommand√©s (avec liens cliquables) -->
    <div *ngIf="showRecommendations && recommendedExercises.length" class="recommendations-block">
      <h3>üìò Exercices recommand√©s :</h3>
      <div *ngFor="let ex of recommendedExercises" class="feature">
        <h4>
          <a [routerLink]="['/recommendation']" [queryParams]="{ mode: ex.mode, type: ex.typeIndex }">
            {{ ex.title }}
          </a>
        </h4>
        <p>{{ ex.description }}</p>
      </div>
    </div>

    <!-- Boutons d'action -->
    <div class="action-buttons">
      <button *ngIf="result" (click)="result = null; showRecommendations = false" class="cta-button">
        Essayer une autre image
      </button>
      <button routerLink="/dictation" class="cta-button">
        ‚û°Ô∏è Aller au Test de Dict√©e
      </button>
      <button routerLink="/services" class="cta-button secondary">
        Retour aux Services
      </button>
    </div>
  </div>
</div>
